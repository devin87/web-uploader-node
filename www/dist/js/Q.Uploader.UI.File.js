//devin87@qq.com
//build:2020/08/25 18:26:42
!function(){"use strict";var p=Q.def,h=Q.getFirst,m=Q.getLast,f=Q.getNext,x=Q.createEle,g=Q.formatSize,b=Q.event.add,w=Q.Uploader,N=w.Lang;function i(e,i){e.className+=" "+i}function S(e,i){e&&(e.innerHTML=i||"")}w.UI.File={init:function(){var e=this.ops.view;e&&i(e,"ui-file "+(this.html5?"html5":"html4"))},draw:function(e){var i=this,s=i.ops,a=s.view;if(a){var t=s.button||{},d=p(N.cancel||t.cancel,"取消"),l=p(N.remove||t.remove,"删除"),v=e.name,c='<div class="fl"><div class="u-name" title="'+v+'">'+v+'</div></div><div class="fr"><div class="u-size"></div><div class="u-speed">--/s</div><div class="u-progress-bar"><div class="u-progress" style="width:1%;"></div></div><div class="u-detail">0%</div><div class="u-state"></div><div class="u-op"><a class="u-op-cancel">'+d+'</a><a class="u-op-remove">'+l+'</a></div></div><div class="clear"></div>',n=e.id,o=x("div","u-item",c);o.taskId=n,e.box=o,a.appendChild(o);var r=m(o.childNodes[1]),u=h(r),f=m(r);b(u,"click",function(){i.cancel(n)}),b(f,"click",function(){i.remove(n),a.removeChild(o)}),i.update(e)}},update:function(e){if(e&&e.box){var i=e.total||e.size,s=e.loaded,a=e.state,t=e.box.childNodes[1],d=h(t),l=f(d),v=f(l),c=h(v),n=f(v);if(S(f(n),w.getStatusText(a)),!(i<0)){var o="";if(this.html5&&null!=s&&0<=s){var r;if(a==w.PROCESSING)"100.0"==(r=Math.min(100*s/i,100).toFixed(1))&&(r="99.9");else a==w.COMPLETE&&(r="100");r&&(r+="%",S(n,c.style.width=r)),o='<span class="u-loaded">'+g(s)+"</span> / ";var u=e.avgSpeed||e.speed;S(l,g(u)+"/s")}S(d,o+='<span class="u-total">'+g(i)+"</span>")}}},over:function(e){e&&e.box&&i(e.box,"u-over")}},w.extend(w.UI.File)}(window);