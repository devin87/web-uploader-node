//devin87@qq.com
//build:2021/08/18 17:20:23
!function(){"use strict";var c=Q.def,r=Q.getFirst,n=Q.getLast,u=Q.getNext,v=Q.createEle,p=Q.formatSize,m=Q.event.add,h=Q.Uploader,f=h.Lang;function s(e,s){e.className+=" "+s}function g(e,s){e&&(e.innerHTML=s||"")}h.UI.File={init:function(){var e=this.ops.view;e&&s(e,"ui-file "+(this.html5?"html5":"html4"))},draw:function(e){var s,i,a,t,d=this,l=d.ops,o=l.view;o&&(s=l.button||{},t=c(f.cancel||s.cancel,"取消"),l=c(f.remove||s.remove,"删除"),t='<div class="fl"><div class="u-name" title="'+(s=e.name)+'">'+s+'</div></div><div class="fr"><div class="u-size"></div><div class="u-speed">--/s</div><div class="u-progress-bar"><div class="u-progress" style="width:1%;"></div></div><div class="u-detail">0%</div><div class="u-state"></div><div class="u-op"><a class="u-op-cancel">'+t+'</a><a class="u-op-remove">'+l+'</a></div></div><div class="clear"></div>',i=e.id,(a=v("div","u-item",t)).taskId=i,e.box=a,o.appendChild(a),l=n(a.childNodes[1]),t=r(l),l=n(l),m(t,"click",function(){d.cancel(i)}),m(l,"click",function(){d.remove(i),o.removeChild(a)}),d.update(e))},update:function(e){var s,i,a,t,d,l,o,c,n,v;e&&e.box&&(s=e.total||e.size,i=e.loaded,a=e.state,o=(t=e.box).childNodes[1],d=r(o),l=u(d),c=u(l),o=r(c),c=u(c),g(u(c),h.getStatusText(a)),a==h.ERROR&&(v=e.json||{},t.title=v.msg||v.errMsg||e.response||h.Lang.upload_error),s<0||(v="",this.html5&&null!=i&&0<=i&&(a==h.PROCESSING?"100.0"==(n=Math.min(100*i/s,100).toFixed(1))&&(n="99.9"):a==h.COMPLETE&&(n="100"),n&&(n+="%",g(c,o.style.width=n)),v='<span class="u-loaded">'+p(i)+"</span> / ",e=e.avgSpeed||e.speed,g(l,p(e)+"/s")),g(d,v+='<span class="u-total">'+p(s)+"</span>")))},over:function(e){e&&e.box&&s(e.box,"u-over")}},h.extend(h.UI.File)}(window);